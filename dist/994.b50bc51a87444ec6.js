"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[994],{2994:(J,u,r)=>{r.r(u),r.d(u,{PaiementsModule:()=>F});var o=r(6895),s=r(8492),d=r(6270),t=r(4650),g=r(529),c=r(4932);let Z=(()=>{class e{constructor(a,n){this.http=a,this.token=n,this.base_url="https://back-m1p10mean.onrender.com/paiements/"}getAll(){return this.http.get(this.base_url+"liste")}valider(a){const{nom:n,prenom:p,email:l}=this.token.GetUser();return this.http.post(this.base_url+"validation",{data:{valideur:{nom:n,prenom:p,email:l},paiement_id:a}})}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(g.eN),t.LFG(c.B))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=r(4631);const A=function(e){return["/paiements/etat/",e]};function v(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"a",7),t._uU(13,"D\xe9tails"),t.qZA()()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.client.nom),t.xp6(2),t.Oqu(a.voiture.numero),t.xp6(2),t.AsE(" ",t.lcZ(7,6,a.date_depot)," - ",t.xi3(8,8,a.date_depot,"shortTime")," "),t.xp6(4),t.Oqu(a.status),t.xp6(2),t.Q6J("routerLink",t.VKq(11,A,a._id))}}function f(e,i){1&e&&t._UZ(0,"span",8)}let T=(()=>{class e{constructor(a){this.paiementService=a,this.paiements=[],this.loading=!1}ngOnInit(){this.getAll()}getAll(){this.paiementService.getAll().subscribe({next:a=>{this.paiements=a.data.paiements}})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-liste"]],standalone:!0,features:[t.jDz],decls:20,vars:3,consts:[[1,"row"],[1,"col-xl-12"],["cardTitle","Listes des r\xe9paration","blockClass","table-border-style",3,"options"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-responsive"],[4,"ngFor","ngForOf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"label","theme-bg2","text-white","f-12","rounded-pill",3,"routerLink"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Client"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"V\xe9hicule"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Date de d\xe9p\xf4t"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Status"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Action"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,v,14,13,"tr",5),t.qZA()(),t.YNc(19,f,1,0,"span",6),t.qZA()()()()),2&a&&(t.xp6(2),t.Q6J("options",!1),t.xp6(16),t.Q6J("ngForOf",n.paiements),t.xp6(1),t.Q6J("ngIf",n.loading))},dependencies:[o.ez,o.sg,o.O5,o.uU,d.m,m.A,s.Bz,s.rH]}),e})();var U=r(8858),h=r(1195);function _(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.cause),t.xp6(2),t.Oqu(a.solution),t.xp6(2),t.hij("",t.lcZ(7,4,a.prix)," Ar"),t.xp6(3),t.Oqu(a.etat)}}function b(e,i){1&e&&t._UZ(0,"span",16)}function q(e,i){1&e&&t._UZ(0,"span",16)}let x=(()=>{class e{constructor(a,n,p,l){this.reparationsService=a,this.paiementService=n,this.route=p,this.toast=l,this.loading=!1,this.total=0}ngOnInit(){this.etat()}etat(){this.loading=!0,this.route.params.subscribe(a=>{this.reparationsService.detailReparation(a.id).subscribe(n=>{1==n.success&&(this.loading=!1,this.reparation=n.data.reparation,this.setTotal())})})}setTotal(){this.reparation.reparation_faire.forEach(a=>{this.total+=Number(a.prix)})}valider(){this.loading=!0,this.paiementService.valider(this.reparation.paiement._id).subscribe({next:a=>{a.success&&(this.loading=!1,this.toast.ShowSuccess("Paiements",a.message.toString()))},error:a=>{this.loading=!1,this.toast.ShowError("Paiements",a.toString())}})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(U.L),t.Y36(Z),t.Y36(s.gz),t.Y36(h.k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-etat"]],standalone:!0,features:[t.jDz],decls:128,vars:40,consts:[[1,"row"],[1,"col-lg-4","col-sm-12"],["cardTitle","Client","blockClass","table-border-style",3,"options"],[1,"container-info-vehicule"],[1,"label"],[1,"col-lg-3","col-sm-12"],["cardTitle","Voiture","blockClass","table-border-style",3,"options"],[1,"col-lg-5","col-sm-12"],["cardTitle","D\xe9tails","blockClass","table-border-style",3,"options"],[1,"col"],["cardTitle","Listes des r\xe9paration","blockClass","table-border-style",3,"options"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-responsive"],[4,"ngFor","ngForOf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"label","theme-bg2","text-white","f-12","rounded-pill",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(a,n){1&a&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"app-card",2)(4,"div",3)(5,"p")(6,"span",4),t._uU(7,"Nom : "),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA()(),t._UZ(10,"hr"),t.TgZ(11,"p")(12,"span",4),t._uU(13,"Pr\xe9nom : "),t.qZA(),t.TgZ(14,"span"),t._uU(15),t.qZA()(),t._UZ(16,"hr"),t.TgZ(17,"p")(18,"span",4),t._uU(19,"Email : "),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()()()()(),t.TgZ(22,"div",5)(23,"app-card",6)(24,"div",3)(25,"p")(26,"span",4),t._uU(27,"Num\xe9ro : "),t.qZA(),t.TgZ(28,"span"),t._uU(29),t.qZA()(),t._UZ(30,"hr"),t.TgZ(31,"p")(32,"span",4),t._uU(33,"Marque : "),t.qZA(),t.TgZ(34,"span"),t._uU(35),t.qZA()(),t._UZ(36,"hr"),t.TgZ(37,"p")(38,"span",4),t._uU(39,"Model : "),t.qZA(),t.TgZ(40,"span"),t._uU(41),t.qZA()()()()(),t.TgZ(42,"div",7)(43,"app-card",8)(44,"div",3)(45,"div",3)(46,"p")(47,"span",4),t._uU(48,"Date de d\xe9p\xf4t : "),t.qZA(),t.TgZ(49,"span"),t._uU(50),t.ALo(51,"date"),t.ALo(52,"date"),t.qZA()(),t.TgZ(53,"p")(54,"span",4),t._uU(55,"Date de sortie : "),t.qZA(),t.TgZ(56,"span"),t._uU(57),t.ALo(58,"date"),t.ALo(59,"date"),t.qZA()(),t.TgZ(60,"p")(61,"span",4),t._uU(62,"Montant total : "),t.qZA(),t.TgZ(63,"span"),t._uU(64),t.ALo(65,"number"),t.qZA()(),t.TgZ(66,"p")(67,"span",4),t._uU(68," \xc9tat des r\xe9parations : "),t.qZA(),t.TgZ(69,"span"),t._uU(70),t.qZA()()()()()()(),t.TgZ(71,"div",0)(72,"div",9)(73,"app-card",10)(74,"div",0)(75,"div",11)(76,"table",12)(77,"thead")(78,"tr")(79,"th"),t._uU(80,"Cause"),t.qZA(),t.TgZ(81,"th"),t._uU(82,"Solution"),t.qZA(),t.TgZ(83,"th"),t._uU(84,"Prix"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Etat"),t.qZA()()(),t.TgZ(87,"tbody"),t.YNc(88,_,10,6,"tr",13),t.qZA(),t.TgZ(89,"tfoot")(90,"tr"),t._UZ(91,"td"),t.TgZ(92,"td"),t._uU(93,"Total"),t.qZA(),t.TgZ(94,"td"),t._uU(95),t.ALo(96,"number"),t.qZA(),t._UZ(97,"td"),t.qZA()()()()(),t.YNc(98,b,1,0,"span",14),t.qZA()()(),t.TgZ(99,"div",0)(100,"div",9)(101,"app-card",10)(102,"div",0)(103,"div",11)(104,"table",12)(105,"thead")(106,"tr")(107,"th"),t._uU(108,"Date paiement"),t.qZA(),t.TgZ(109,"th"),t._uU(110,"Montant"),t.qZA(),t.TgZ(111,"th"),t._uU(112,"Mode"),t.qZA(),t.TgZ(113,"th"),t._uU(114,"Actions"),t.qZA()()(),t.TgZ(115,"tbody")(116,"tr")(117,"td"),t._uU(118),t.qZA(),t.TgZ(119,"td"),t._uU(120),t.ALo(121,"number"),t.qZA(),t.TgZ(122,"td"),t._uU(123),t.qZA(),t.TgZ(124,"td")(125,"button",15),t.NdJ("click",function(){return n.valider()}),t._uU(126," Valider "),t.YNc(127,q,1,0,"span",14),t.qZA()()()()()()()()()()()),2&a&&(t.xp6(3),t.Q6J("options",!1),t.xp6(6),t.hij("",n.reparation.client.nom," "),t.xp6(6),t.hij("",n.reparation.client.prenom," "),t.xp6(6),t.hij("",n.reparation.client.email," "),t.xp6(2),t.Q6J("options",!1),t.xp6(6),t.hij("",n.reparation.voiture.numero," "),t.xp6(6),t.hij("",n.reparation.voiture.marque," "),t.xp6(6),t.hij("",n.reparation.voiture.model," "),t.xp6(2),t.Q6J("options",!1),t.xp6(7),t.AsE("",t.lcZ(51,24,n.reparation.date_depot)," - ",t.xi3(52,26,n.reparation.date_depot,"shortTime")," "),t.xp6(7),t.AsE("",t.lcZ(58,29,n.reparation.date_sortie)," - ",t.xi3(59,31,n.reparation.date_sortie,"shortTime")," "),t.xp6(7),t.hij("",t.lcZ(65,34,n.total)," Ar"),t.xp6(6),t.hij("",n.reparation.status," "),t.xp6(3),t.Q6J("options",!0),t.xp6(15),t.Q6J("ngForOf",n.reparation.reparation_faire),t.xp6(7),t.hij("",t.lcZ(96,36,n.total)," Ar"),t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(3),t.Q6J("options",!0),t.xp6(17),t.Oqu(n.reparation.paiement.date),t.xp6(2),t.hij("",t.lcZ(121,38,n.reparation.paiement.recu)," Ar"),t.xp6(3),t.Oqu(n.reparation.paiement.mode),t.xp6(4),t.Q6J("ngIf",n.loading))},dependencies:[d.m,o.sg,o.O5,m.A,o.JJ,o.uU,o.ez]}),e})();var L=r(3941);const C=[{path:"",children:[{path:"liste",component:T},{path:"etat/:id",component:x}],canActivate:[(()=>{class e{constructor(a,n,p,l){this.authService=a,this.token=n,this.toast=p,this.router=l}canActivate(a,n){return!this.authService.isLoggedIn||"financier"===this.token.GetUser().role||(this.toast.ShowError("Connexion","Vous ne pouvez pas y accedez"),this.router.navigateByUrl("/dashboard"))}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(L.g),t.LFG(c.B),t.LFG(h.k),t.LFG(s.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]}];let E=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(C),s.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[o.ez,E]}),e})()}}]);