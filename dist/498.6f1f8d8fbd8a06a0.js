"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[498],{1498:(T,p,r)=>{r.r(p),r.d(p,{StatistiqueModule:()=>Z});var m=r(6895),f=r(8492),b=r(6205),M=r(6270),t=r(4650),x=r(1775),g=r(4631),v=r(1366);const C=["jourchart"],y=["months"];function S(i,n){if(1&i&&(t.TgZ(0,"app-card",16)(1,"div",17),t._UZ(2,"apx-chart",18),t.qZA()()),2&i){const a=t.oxw();t.xp6(2),t.Q6J("series",a.jourChartOptions.series)("chart",a.jourChartOptions.chart)("xaxis",a.jourChartOptions.xaxis)("stroke",a.jourChartOptions.stroke)("dataLabels",a.jourChartOptions.dataLabels)("yaxis",a.jourChartOptions.yaxis)("labels",a.jourChartOptions.labels)("legend",a.jourChartOptions.legend)("title",a.jourChartOptions.title)("subtitle",a.jourChartOptions.subtitle)("fill",a.jourChartOptions.fill)}}function q(i,n){if(1&i&&(t.TgZ(0,"app-card",19)(1,"div",17),t._UZ(2,"apx-chart",20),t.qZA()()),2&i){const a=t.oxw();t.xp6(2),t.Q6J("series",a.montChart.series)("chart",a.montChart.chart)("xaxis",a.montChart.xaxis)("stroke",a.montChart.stroke)("dataLabels",a.montChart.dataLabels)("yaxis",a.montChart.yaxis)("labels",a.montChart.labels)("legend",a.montChart.legend)("title",a.montChart.title)("subtitle",a.montChart.subtitle)("plotOptions",a.montChart.plotOptions)}}const j=[{path:"",children:[{path:"liste",component:(()=>{class i{constructor(a){this.statistiqueService=a,this.tempMoyen=0,this.datasJour=[],this.datesJour=[],this.chiffreMoisMitambatra=[],this.depenseMoisMitambatra=[],this.beneficeMoisMitambatra=[],this.datesMitambatra=[],this.month=["Jan","Fev","Mar","Avr","Mai","Juin","Juill","Aout","Sept","Oct","Nov"]}ngOnInit(){this.statistiqueService.tempsMoyenDeR\u00e9paration().subscribe(a=>{a.success&&(console.log(a),this.tempMoyen=a.data.tempsmoyen[0].numSecond)}),this.statistiqueService.chiffreAffaireParJour().subscribe(a=>{a.success&&(this.datasJour=[],this.datesJour=[],a.data.chiffreJour.forEach(s=>{this.datasJour.push(s.chiffre),this.datesJour.push(s._id)}),this.jourChartOptions={fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.8,opacityTo:.8,stops:[0,90,100]}},series:[{name:"Montant",data:this.datasJour}],chart:{type:"area",height:350,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},labels:this.datesJour,xaxis:{type:"datetime"},yaxis:{opposite:!0},legend:{horizontalAlign:"left"}})}),this.statistiqueService.chiffreAffaireParMois().subscribe(a=>{if(a.success){console.log(a);var s=[],o=[];a.data.chiffreMonth.forEach(h=>{s.push(h.total_cost_month),o.push(h._id.year+" "+this.month[h._id.month-1])}),this.statistiqueService.depenseParMois().subscribe(h=>{if(h.success){console.log(h);var u=[],l=[];h.data.depenseMonth.forEach(c=>{u.push(c.total_cost_month),l.push(c._id.year+" "+this.month[c._id.month-1])})}for(var e=0;e<o.length;e++)if(this.datesMitambatra.includes(o[e])){var d=this.datesMitambatra.findIndex(c=>c==o[e]);this.chiffreMoisMitambatra[d]=s[e]}else this.datesMitambatra.push(o[e]),this.chiffreMoisMitambatra.push(s[e]),this.depenseMoisMitambatra.push(0);for(e=0;e<l.length;e++)this.datesMitambatra.includes(l[e])?(d=this.datesMitambatra.findIndex(O=>O==l[e]),this.depenseMoisMitambatra[d]=u[e]):(this.datesMitambatra.push(l[e]),this.depenseMoisMitambatra.push(u[e]),this.chiffreMoisMitambatra.push(0));for(e=0;e<this.datesMitambatra.length;e++)console.log(this.chiffreMoisMitambatra[e]+"-"+this.depenseMoisMitambatra[e]),this.beneficeMoisMitambatra[e]=this.chiffreMoisMitambatra[e]-this.depenseMoisMitambatra[e];this.statistiqueService.trierDatesMonths(this.datesMitambatra,this.chiffreMoisMitambatra,this.depenseMoisMitambatra,this.beneficeMoisMitambatra),this.montChart={fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.8,opacityTo:.8,stops:[0,90,100]}},series:[{name:"Chiffre d'affaire",data:this.chiffreMoisMitambatra},{name:"D\xe9pense",data:this.depenseMoisMitambatra},{name:"B\xe9n\xe9fice",data:this.beneficeMoisMitambatra}],chart:{type:"area",height:350,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},labels:this.datesMitambatra,xaxis:{},yaxis:{opposite:!0},legend:{horizontalAlign:"left"}}})}})}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(x.P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-statistique"]],viewQuery:function(a,s){if(1&a&&(t.Gf(C,5),t.Gf(y,5)),2&a){let o;t.iGM(o=t.CRH())&&(s.jourchart=o.first),t.iGM(o=t.CRH())&&(s.months=o.first)}},standalone:!0,features:[t.jDz],decls:20,vars:5,consts:[[1,"row"],[1,"col-md-6","col-xl-4"],[3,"hidHeader"],[1,"mb-4"],[1,"row","d-flex","align-items-center"],[1,"col-9"],[1,"f-w-300","d-flex","align-items-center","m-b-0"],[1,"feather","icon-clock","text-c-red","f-30","m-r-10"],[1,"col-3","text-end"],[1,"m-b-0"],[1,"m-t-30"],["type","text-primary","height","7px",3,"value"],[1,"col-xl-8","col-md-6"],["cardTitle","Chiffre d'affaire par jour",4,"ngIf"],[1,"col-xl-12","col-md-6"],["cardTitle","D\xe9pense par mois",4,"ngIf"],["cardTitle","Chiffre d'affaire par jour"],["id","chart"],[3,"series","chart","xaxis","stroke","dataLabels","yaxis","labels","legend","title","subtitle","fill"],["cardTitle","D\xe9pense par mois"],[3,"series","chart","xaxis","stroke","dataLabels","yaxis","labels","legend","title","subtitle","plotOptions"]],template:function(a,s){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"h6",3),t._uU(4,"Temps moyen de r\xe9paration"),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"h3",6),t._UZ(8,"i",7),t._uU(9),t.qZA()(),t.TgZ(10,"div",8)(11,"p",9),t._uU(12,"100%"),t.qZA()()(),t.TgZ(13,"div",10),t._UZ(14,"ngb-progressbar",11),t.qZA()()(),t._UZ(15,"div",1),t.TgZ(16,"div",12),t.YNc(17,S,3,11,"app-card",13),t.qZA(),t.TgZ(18,"div",14),t.YNc(19,q,3,11,"app-card",15),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("hidHeader",!0),t.xp6(7),t.hij("",s.tempMoyen," "),t.xp6(5),t.Q6J("value",100),t.xp6(3),t.Q6J("ngIf",void 0!==s.jourChartOptions),t.xp6(2),t.Q6J("ngIf",void 0!==s.montChart))},dependencies:[M.m,m.O5,g.A,v.Ly,b.X,b.x]}),i})()}]}];let J=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(j),f.Bz]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,J]}),i})()}}]);