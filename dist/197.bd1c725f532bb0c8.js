"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[197],{197:(z,m,s)=>{s.r(m),s.d(m,{VoituresModule:()=>S});var u=s(6895),a=s(8492),v=s(2953),g=s(2851),d=s(6270),n=s(4006),e=s(4650),f=s(529),h=s(3301),c=s(4631);function Z(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2,"Veuillez pr\xe9ciser le num\xe9ro du v\xe9hicule "),e.qZA()())}function b(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2,"Veuillez pr\xe9ciser la marque "),e.qZA()())}function q(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2," Veuillez pr\xe9ciser le mod\xe9le "),e.qZA()())}function _(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2," Un probl\xe8me est survenu lors de l'insertion de votre v\xe9hivule "),e.qZA()())}function A(t,i){1&t&&e._UZ(0,"span",19)}let T=(()=>{class t{constructor(o,r,l,p){this.formBuilder=o,this.http=r,this.userService=l,this.router=p,this.form=new n.cw({numero:new n.NI(""),marque:new n.NI(""),model:new n.NI("")}),this.submitted=!1,this.loading=!1,this.error=!1}ngOnInit(){this.form=this.formBuilder.group({numero:["",n.kI.required],marque:["",n.kI.required],model:["",n.kI.required]})}get f(){return this.form.controls}onSubmit(){if(this.loading=!0,this.submitted=!0,this.form.invalid)return void(this.loading=!1);console.log(this.form.value);let o={numero:this.form.value.numero,marque:this.form.value.marque,model:this.form.value.model};console.log(o),this.userService.ajouterVoiture(o).subscribe(r=>{1==r.success?(this.loading=!1,this.router.navigateByUrl("/users/voitures/liste")):(this.error=!0,this.loading=!1)})}onReset(){this.submitted=!1,this.form.reset()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(n.qu),e.Y36(f.eN),e.Y36(h.f),e.Y36(a.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-ajout"]],standalone:!0,features:[e.jDz],decls:34,vars:7,consts:[[1,"row"],[1,"col-sm-12"],["cardTitle","Ajouter une voiture",3,"options"],[1,"col-md-12"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","numero",1,"col-sm-3","col-form-label"],[1,"col-sm-5"],["type","text","formControlName","numero","id","numero","placeholder","4589 WWT","required","",1,"form-control"],[4,"ngIf"],["for","marque",1,"col-sm-3","col-form-label"],["type","text","formControlName","marque","id","marque","placeholder","Mazda","required","",1,"form-control"],["for","model",1,"col-sm-3","col-form-label"],["type","text","formControlName","model","id","model","placeholder","BT 50","required","",1,"form-control"],[1,"col-sm-10"],["type","submit",1,"btn","btn-primary"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"offset-3",2,"padding-left","12px","padding-top","10px","font-size","12px","color","red"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",5)(6,"label",6),e._uU(7,"Num\xe9ro du v\xe9hicule "),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"input",8),e.qZA()(),e.YNc(10,Z,3,0,"div",9),e._UZ(11,"br"),e.TgZ(12,"div",5)(13,"label",10),e._uU(14,"Marque"),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"input",11),e.qZA()(),e.YNc(17,b,3,0,"div",9),e._UZ(18,"br"),e.TgZ(19,"div",5)(20,"label",12),e._uU(21,"Mod\xe8le"),e.qZA(),e.TgZ(22,"div",7),e._UZ(23,"input",13),e.qZA()(),e.YNc(24,q,3,0,"div",9),e._UZ(25,"br"),e.YNc(26,_,3,0,"div",9),e.TgZ(27,"div",5)(28,"div",14)(29,"button",15),e._uU(30,"Ajouter le v\xe9hicule "),e.YNc(31,A,1,0,"span",16),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return r.onReset()}),e._uU(33,"Nettoyer"),e.qZA()()()()()()()()),2&o&&(e.xp6(2),e.Q6J("options",!1),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngIf",r.submitted&&r.f.numero.errors),e.xp6(7),e.Q6J("ngIf",r.submitted&&r.f.marque.errors),e.xp6(7),e.Q6J("ngIf",r.submitted&&r.f.model.errors),e.xp6(2),e.Q6J("ngIf",r.error),e.xp6(5),e.Q6J("ngIf",r.loading))},dependencies:[u.ez,u.O5,d.m,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,c.A,v.XC,g.e4]}),t})();const U=function(t){return["/users/voitures/historique",t]};function C(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"tr")(1,"th",9),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",10)(10,"button",11),e.NdJ("click",function(){const p=e.CHM(o).$implicit,Y=e.oxw();return e.KtG(Y.deposerVoiture(p.numero))}),e._uU(11,"D\xe9poser"),e.qZA(),e.TgZ(12,"a",2)(13,"button",12),e._uU(14,"Voir l'historique"),e.qZA()()()()}if(2&t){const o=i.$implicit,r=i.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(o.numero),e.xp6(2),e.Oqu(o.model),e.xp6(2),e.Oqu(o.marque),e.xp6(4),e.Q6J("routerLink",e.VKq(5,U,o.numero))}}function x(t,i){1&t&&e._UZ(0,"span",13)}const y=function(){return["/users/voitures/ajout"]};let V=(()=>{class t{constructor(o,r){this.userService=o,this.router=r,this.voitures=[],this.loading=!0}ngOnInit(){this.userService.listVoitures().subscribe(o=>{1==o.success&&(this.voitures=o.data,this.loading=!1)})}deposerVoiture(o){this.loading=!0,this.userService.deposerVoiture(o).subscribe(r=>{1==r.success&&(this.loading=!1,this.router.navigateByUrl("/users/reparations/liste"))})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h.f),e.Y36(a.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-liste"]],standalone:!0,features:[e.jDz],decls:24,vars:5,consts:[[1,"row"],[1,"col-xl-12"],[3,"routerLink"],[1,"btn","btn-danger"],["cardTitle","Liste des voitures","blockClass","table-border-style",3,"options"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-responsive"],[4,"ngFor","ngForOf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["scope","row"],[1,"action"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p")(3,"a",2)(4,"button",3),e._uU(5,"Ajouter une voiture"),e.qZA()()(),e.TgZ(6,"app-card",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),e._uU(12,"#"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Num\xe9ro du v\xe9hicule"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Mod\xe8le"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Marque"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Action"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,C,15,7,"tr",7),e.qZA()(),e.YNc(23,x,1,0,"span",8),e.qZA()()()()),2&o&&(e.xp6(3),e.Q6J("routerLink",e.DdM(4,y)),e.xp6(3),e.Q6J("options",!1),e.xp6(16),e.Q6J("ngForOf",r.voitures),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[u.ez,u.sg,u.O5,d.m,c.A,a.Bz,a.rH],styles:[".action[_ngcontent-%COMP%]{width:200px}"]}),t})();var j=s(6337),J=s(3941);let N=(()=>{class t{constructor(o,r,l){this.http=o,this.router=r,this.authService=l,this.base_url="https://back-m1p10mean.onrender.com/reparations/"}listRepartionOfVoiture(o){return this.http.get(this.base_url+o+"/historique")}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(f.eN),e.LFG(a.F0),e.LFG(J.g))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const E=function(t){return["/users/reparations/details",t]};function O(t,i){if(1&t&&(e.TgZ(0,"tr")(1,"th",7),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",8)(12,"a",9)(13,"button",10),e._uU(14,"Avancement"),e.qZA()()()()),2&t){const o=i.$implicit,r=i.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(o.voiture.numero),e.xp6(2),e.AsE("",e.lcZ(7,6,o.date_depot)," - ",e.xi3(8,8,o.date_depot,"shortTime"),""),e.xp6(4),e.Oqu(o.status),e.xp6(2),e.Q6J("routerLink",e.VKq(11,E,o._id))}}function F(t,i){1&t&&e._UZ(0,"span",11)}const I=[{path:"",children:[{path:"liste",component:V},{path:"ajout",component:T},{path:"historique/:idvoiture",component:(()=>{class t{constructor(o,r){this.activatedRoute=o,this.voitureService=r,this.loading=!1,this.reparations=[]}ngOnInit(){this.loading=!0,this.activatedRoute.params.subscribe(o=>{this.id=o.idvoiture,this.voitureService.listRepartionOfVoiture(o.idvoiture).subscribe(r=>{r.success&&(this.reparations=r.data.historiques,this.loading=!1)})})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(a.gz),e.Y36(N))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-historique"]],standalone:!0,features:[e.jDz],decls:22,vars:4,consts:[[1,"row"],[1,"col-xl-12"],["blockClass","table-border-style",3,"cardTitle","options"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-responsive"],[4,"ngFor","ngForOf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["scope","row"],[1,"action"],[3,"routerLink"],[1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"historique works!"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"app-card",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"#"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"V\xe9hicule"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Date de d\xe9p\xf4t"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Status"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Action"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,O,15,13,"tr",5),e.qZA()(),e.YNc(21,F,1,0,"span",6),e.qZA()()()()),2&o&&(e.xp6(4),e.MGl("cardTitle","Historique de r\xe9paration du v\xe9hicule : ",r.id,""),e.Q6J("options",!1),e.xp6(16),e.Q6J("ngForOf",r.reparations),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[u.ez,u.sg,u.O5,u.uU,d.m,c.A,j.d,a.Bz,a.rH],styles:[".action[_ngcontent-%COMP%]{width:200px}"]}),t})()}]}];let L=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.Bz.forChild(I),a.Bz]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,L]}),t})()}}]);