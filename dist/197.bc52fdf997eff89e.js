"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[197],{197:(M,h,n)=>{n.r(h),n.d(h,{VoituresModule:()=>Q});var u=n(6895),a=n(8492),Z=n(1366),b=n(2851),d=n(6270),s=n(4006),e=n(4650),v=n(529),g=n(3301),q=n(1195),c=n(4631);function A(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2,"Veuillez pr\xe9ciser le num\xe9ro du v\xe9hicule "),e.qZA()())}function T(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2,"Veuillez pr\xe9ciser la marque "),e.qZA()())}function _(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2," Veuillez pr\xe9ciser le mod\xe9le "),e.qZA()())}function U(t,i){1&t&&(e.TgZ(0,"div")(1,"div",18),e._uU(2," Un probl\xe8me est survenu lors de l'insertion de votre v\xe9hivule "),e.qZA()())}function C(t,i){1&t&&e._UZ(0,"span",19)}let x=(()=>{class t{constructor(o,r,l,m,f){this.formBuilder=o,this.http=r,this.userService=l,this.router=m,this.toast=f,this.form=new s.cw({numero:new s.NI(""),marque:new s.NI(""),model:new s.NI("")}),this.submitted=!1,this.loading=!1,this.error=!1}ngOnInit(){this.form=this.formBuilder.group({numero:["",s.kI.required],marque:["",s.kI.required],model:["",s.kI.required]})}get f(){return this.form.controls}onSubmit(){if(this.loading=!0,this.submitted=!0,this.form.invalid)return void(this.loading=!1);console.log(this.form.value);let o={numero:this.form.value.numero,marque:this.form.value.marque,model:this.form.value.model};console.log(o),this.userService.ajouterVoiture(o).subscribe(r=>{1==r.success?(this.loading=!1,this.toast.ShowSuccess("Voitures ","Nouveau voitures ajout\xe9"),this.router.navigateByUrl("/users/voitures/liste")):(this.error=!0,this.loading=!1)})}onReset(){this.submitted=!1,this.form.reset()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(v.eN),e.Y36(g.f),e.Y36(a.F0),e.Y36(q.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-ajout"]],standalone:!0,features:[e.jDz],decls:34,vars:7,consts:[[1,"row"],[1,"col-sm-12"],["cardTitle","Ajouter une voiture",3,"options"],[1,"col-md-12"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","numero",1,"col-sm-3","col-form-label"],[1,"col-sm-5"],["type","text","formControlName","numero","id","numero","placeholder","4589 WWT","required","",1,"form-control"],[4,"ngIf"],["for","marque",1,"col-sm-3","col-form-label"],["type","text","formControlName","marque","id","marque","placeholder","Mazda","required","",1,"form-control"],["for","model",1,"col-sm-3","col-form-label"],["type","text","formControlName","model","id","model","placeholder","BT 50","required","",1,"form-control"],[1,"col-sm-10"],["type","submit",1,"btn","btn-primary"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"offset-3",2,"padding-left","12px","padding-top","10px","font-size","12px","color","red"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",5)(6,"label",6),e._uU(7,"Num\xe9ro du v\xe9hicule "),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"input",8),e.qZA()(),e.YNc(10,A,3,0,"div",9),e._UZ(11,"br"),e.TgZ(12,"div",5)(13,"label",10),e._uU(14,"Marque"),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"input",11),e.qZA()(),e.YNc(17,T,3,0,"div",9),e._UZ(18,"br"),e.TgZ(19,"div",5)(20,"label",12),e._uU(21,"Mod\xe8le"),e.qZA(),e.TgZ(22,"div",7),e._UZ(23,"input",13),e.qZA()(),e.YNc(24,_,3,0,"div",9),e._UZ(25,"br"),e.YNc(26,U,3,0,"div",9),e.TgZ(27,"div",5)(28,"div",14)(29,"button",15),e._uU(30,"Ajouter le v\xe9hicule "),e.YNc(31,C,1,0,"span",16),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return r.onReset()}),e._uU(33,"Nettoyer"),e.qZA()()()()()()()()),2&o&&(e.xp6(2),e.Q6J("options",!1),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngIf",r.submitted&&r.f.numero.errors),e.xp6(7),e.Q6J("ngIf",r.submitted&&r.f.marque.errors),e.xp6(7),e.Q6J("ngIf",r.submitted&&r.f.model.errors),e.xp6(2),e.Q6J("ngIf",r.error),e.xp6(5),e.Q6J("ngIf",r.loading))},dependencies:[u.ez,u.O5,d.m,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,c.A,Z.XC,b.e4]}),t})();var p=n(8423);const y=function(t){return["/users/voitures/historique",t]};function V(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"tr")(1,"th",10),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",11)(10,"button",12),e.NdJ("click",function(){const m=e.CHM(o).$implicit,f=e.oxw();return e.KtG(f.deposerVoiture(m.numero))}),e._uU(11," D\xe9poser "),e.qZA(),e.TgZ(12,"a",3)(13,"button",13),e._uU(14,"Voir l'historique"),e.qZA()()()()}if(2&t){const o=i.$implicit,r=i.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(o.numero),e.xp6(2),e.Oqu(o.model),e.xp6(2),e.Oqu(o.marque),e.xp6(4),e.Q6J("routerLink",e.VKq(5,y,o.numero))}}function j(t,i){1&t&&e._UZ(0,"span",14)}const J=function(){return["/users/voitures/ajout"]};let N=(()=>{class t{constructor(o,r,l){this.userService=o,this.router=r,this.spinner=l,this.voitures=[],this.loading=!1}ngOnInit(){this.spinner.show(),this.userService.listVoitures().subscribe(o=>{1==o.success&&(this.voitures=o.data,this.spinner.hide())})}deposerVoiture(o){this.loading=!0,this.userService.deposerVoiture(o).subscribe(r=>{1==r.success&&(this.loading=!1,this.router.navigateByUrl("/users/reparations/liste"))})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(g.f),e.Y36(a.F0),e.Y36(p.t2))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-liste"]],standalone:!0,features:[e.jDz],decls:25,vars:6,consts:[["bdColor","rgba(0,0,0,0.8)","size","default","color","","type","ball-spin-clockwise",3,"fullScreen"],[1,"row"],[1,"col-xl-12"],[3,"routerLink"],[1,"btn","btn-danger"],["cardTitle","Liste des voitures","blockClass","table-border-style",3,"options"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-responsive"],[4,"ngFor","ngForOf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["scope","row"],[1,"action"],[1,"label","theme-bg2","text-white","f-12","rounded-pill",3,"click"],[1,"label","theme-bg","text-white","f-12","rounded-pill"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"p")(4,"a",3)(5,"button",4),e._uU(6,"Ajouter une voiture"),e.qZA()()(),e.TgZ(7,"app-card",5)(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th"),e._uU(13,"#"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Num\xe9ro du v\xe9hicule"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Mod\xe8le"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Marque"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Action"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,V,15,7,"tr",8),e.qZA()(),e.YNc(24,j,1,0,"span",9),e.qZA()()()()),2&o&&(e.Q6J("fullScreen",!0),e.xp6(4),e.Q6J("routerLink",e.DdM(5,J)),e.xp6(3),e.Q6J("options",!1),e.xp6(16),e.Q6J("ngForOf",r.voitures),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[u.ez,u.sg,u.O5,d.m,c.A,a.Bz,a.rH,p.ef,p.Ro],styles:[".action[_ngcontent-%COMP%]{width:200px}"]}),t})();var S=n(6337),E=n(3941);let O=(()=>{class t{constructor(o,r,l){this.http=o,this.router=r,this.authService=l,this.base_url="https://back-m1p10mean.onrender.com/reparations/"}listRepartionOfVoiture(o){return this.http.get(this.base_url+o+"/historique")}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(v.eN),e.LFG(a.F0),e.LFG(E.g))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const F=function(t){return["/users/reparations/details",t]};function I(t,i){if(1&t&&(e.TgZ(0,"tr")(1,"th",7),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",8)(12,"a",9)(13,"button",10),e._uU(14,"Avancement"),e.qZA()()()()),2&t){const o=i.$implicit,r=i.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(o.voiture.numero),e.xp6(2),e.AsE("",e.lcZ(7,6,o.date_depot)," - ",e.xi3(8,8,o.date_depot,"shortTime"),""),e.xp6(4),e.Oqu(o.status),e.xp6(2),e.Q6J("routerLink",e.VKq(11,F,o._id))}}function Y(t,i){1&t&&e._UZ(0,"span",11)}const z=[{path:"",children:[{path:"liste",component:N},{path:"ajout",component:x},{path:"historique/:idvoiture",component:(()=>{class t{constructor(o,r){this.activatedRoute=o,this.voitureService=r,this.loading=!1,this.reparations=[]}ngOnInit(){this.loading=!0,this.activatedRoute.params.subscribe(o=>{this.id=o.idvoiture,this.voitureService.listRepartionOfVoiture(o.idvoiture).subscribe(r=>{r.success&&(this.reparations=r.data.historiques,this.loading=!1)})})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(a.gz),e.Y36(O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-historique"]],standalone:!0,features:[e.jDz],decls:22,vars:4,consts:[[1,"row"],[1,"col-xl-12"],["blockClass","table-border-style",3,"cardTitle","options"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-responsive"],[4,"ngFor","ngForOf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["scope","row"],[1,"action"],[3,"routerLink"],[1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"historique works!"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"app-card",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"#"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"V\xe9hicule"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Date de d\xe9p\xf4t"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Status"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Action"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,I,15,13,"tr",5),e.qZA()(),e.YNc(21,Y,1,0,"span",6),e.qZA()()()()),2&o&&(e.xp6(4),e.MGl("cardTitle","Historique de r\xe9paration du v\xe9hicule : ",r.id,""),e.Q6J("options",!1),e.xp6(16),e.Q6J("ngForOf",r.reparations),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[u.ez,u.sg,u.O5,u.uU,d.m,c.A,S.d,a.Bz,a.rH],styles:[".action[_ngcontent-%COMP%]{width:200px}"]}),t})()}]}];let L=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.Bz.forChild(z),a.Bz]}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,L]}),t})()}}]);