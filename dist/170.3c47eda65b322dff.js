"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[170],{170:(R,x,u)=>{u.r(x),u.d(x,{StatistiqueModule:()=>h});var g=u(6895),c=u(8492),t=u(4650),b=u(529);let M=(()=>{class e{constructor(a){this.http=a,this.base_url="https://back-m1p10mean.onrender.com/reparations/",this.local_url="http://localhost:3000/statistiques/",this.month=["Jan","Fev","Mar","Avr","Mai","Juin","Juill","Aout","Sept","Oct","Nov"]}tempsMoyenDeR\u00e9paration(){return this.http.get(this.local_url+"tempsmoyen")}chiffreAffaireParJour(){return this.http.get(this.local_url+"chiffreday")}chiffreAffaireParMois(){return this.http.get(this.local_url+"chiffremonth")}depenseParMois(){return this.http.get(this.local_url+"depensemonth")}trierDatesMonths(a,n,d,p){for(var r=0;r<a.length-1;r++)for(var o=r+1;o<a.length;o++){var s=a[r].split(" "),_=a[o].split(" ");if(Number(s[0])>Number(_[0])){var C=a[r];a[r]=a[o],a[o]=C;var O=n[r];n[r]=n[o],n[o]=O;var v=d[r];d[r]=d[o],d[o]=v;var S=p[r];p[r]=p[o],p[o]=S}else Number(s[0])==Number(_[0])&&this.month.findIndex(w=>w==s[1])>this.month.findIndex(w=>w==_[1])&&(C=a[r],a[r]=a[o],a[o]=C,O=n[r],n[r]=n[o],n[o]=O,v=d[r],d[r]=d[o],d[o]=v,S=p[r],p[r]=p[o],p[o]=S)}}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(b.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=u(4631),y=u(2953),Z=u(6205);const A=["jourchart"],J=["months"];function q(e,m){if(1&e&&(t.TgZ(0,"app-card",16)(1,"div",17),t._UZ(2,"apx-chart",18),t.qZA()()),2&e){const a=t.oxw();t.xp6(2),t.Q6J("series",a.jourChartOptions.series)("chart",a.jourChartOptions.chart)("xaxis",a.jourChartOptions.xaxis)("stroke",a.jourChartOptions.stroke)("dataLabels",a.jourChartOptions.dataLabels)("yaxis",a.jourChartOptions.yaxis)("labels",a.jourChartOptions.labels)("legend",a.jourChartOptions.legend)("title",a.jourChartOptions.title)("subtitle",a.jourChartOptions.subtitle)("fill",a.jourChartOptions.fill)}}function I(e,m){if(1&e&&(t.TgZ(0,"app-card",19)(1,"div",17),t._UZ(2,"apx-chart",20),t.qZA()()),2&e){const a=t.oxw();t.xp6(2),t.Q6J("series",a.montChart.series)("chart",a.montChart.chart)("xaxis",a.montChart.xaxis)("stroke",a.montChart.stroke)("dataLabels",a.montChart.dataLabels)("yaxis",a.montChart.yaxis)("labels",a.montChart.labels)("legend",a.montChart.legend)("title",a.montChart.title)("subtitle",a.montChart.subtitle)("plotOptions",a.montChart.plotOptions)}}const f=[{path:"",children:[{path:"liste",component:(()=>{class e{constructor(a){this.statistiqueService=a,this.tempMoyen=0,this.datasJour=[],this.datesJour=[],this.chiffreMoisMitambatra=[],this.depenseMoisMitambatra=[],this.beneficeMoisMitambatra=[],this.datesMitambatra=[],this.month=["Jan","Fev","Mar","Avr","Mai","Juin","Juill","Aout","Sept","Oct","Nov"]}ngOnInit(){this.statistiqueService.tempsMoyenDeR\u00e9paration().subscribe(a=>{a.success&&(console.log(a),this.tempMoyen=a.data.tempsmoyen[0].numSecond)}),this.statistiqueService.chiffreAffaireParJour().subscribe(a=>{a.success&&(this.datasJour=[],this.datesJour=[],a.data.chiffreJour.forEach(n=>{this.datasJour.push(n.chiffre),this.datesJour.push(n._id)}),this.jourChartOptions={fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.8,opacityTo:.8,stops:[0,90,100]}},series:[{name:"Montant",data:this.datasJour}],chart:{type:"area",height:350,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},labels:this.datesJour,xaxis:{type:"datetime"},yaxis:{opposite:!0},legend:{horizontalAlign:"left"}})}),this.statistiqueService.chiffreAffaireParMois().subscribe(a=>{if(a.success){console.log(a);var n=[],d=[];a.data.chiffreMonth.forEach(p=>{n.push(p.total_cost_month),d.push(p._id.year+" "+this.month[p._id.month-1])}),this.statistiqueService.depenseParMois().subscribe(p=>{if(p.success){console.log(p);var r=[],o=[];p.data.depenseMonth.forEach(C=>{r.push(C.total_cost_month),o.push(C._id.year+" "+this.month[C._id.month-1])})}for(var s=0;s<d.length;s++)if(this.datesMitambatra.includes(d[s])){var _=this.datesMitambatra.findIndex(C=>C==d[s]);this.chiffreMoisMitambatra[_]=n[s]}else this.datesMitambatra.push(d[s]),this.chiffreMoisMitambatra.push(n[s]),this.depenseMoisMitambatra.push(0);for(s=0;s<o.length;s++)this.datesMitambatra.includes(o[s])?(_=this.datesMitambatra.findIndex(v=>v==o[s]),this.depenseMoisMitambatra[_]=r[s]):(this.datesMitambatra.push(o[s]),this.depenseMoisMitambatra.push(r[s]),this.chiffreMoisMitambatra.push(0));for(s=0;s<this.datesMitambatra.length;s++)console.log(this.chiffreMoisMitambatra[s]+"-"+this.depenseMoisMitambatra[s]),this.beneficeMoisMitambatra[s]=this.chiffreMoisMitambatra[s]-this.depenseMoisMitambatra[s];this.statistiqueService.trierDatesMonths(this.datesMitambatra,this.chiffreMoisMitambatra,this.depenseMoisMitambatra,this.beneficeMoisMitambatra),this.montChart={fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.8,opacityTo:.8,stops:[0,90,100]}},series:[{name:"Chiffre d'affaire",data:this.chiffreMoisMitambatra},{name:"D\xe9pense",data:this.depenseMoisMitambatra},{name:"B\xe9n\xe9fice",data:this.beneficeMoisMitambatra}],chart:{type:"area",height:350,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},labels:this.datesMitambatra,xaxis:{},yaxis:{opposite:!0},legend:{horizontalAlign:"left"}}})}})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-statistique"]],viewQuery:function(a,n){if(1&a&&(t.Gf(A,5),t.Gf(J,5)),2&a){let d;t.iGM(d=t.CRH())&&(n.jourchart=d.first),t.iGM(d=t.CRH())&&(n.months=d.first)}},decls:22,vars:5,consts:[[1,"row"],[1,"col-md-6","col-xl-4"],[3,"hidHeader"],[1,"mb-4"],[1,"row","d-flex","align-items-center"],[1,"col-9"],[1,"f-w-300","d-flex","align-items-center","m-b-0"],[1,"feather","icon-clock","text-c-red","f-30","m-r-10"],[1,"col-3","text-end"],[1,"m-b-0"],[1,"m-t-30"],["type","text-primary","height","7px",3,"value"],[1,"col-xl-8","col-md-6"],["cardTitle","Chiffre d'affaire par jour",4,"ngIf"],[1,"col-xl-12","col-md-6"],["cardTitle","D\xe9pense par mois",4,"ngIf"],["cardTitle","Chiffre d'affaire par jour"],["id","chart"],[3,"series","chart","xaxis","stroke","dataLabels","yaxis","labels","legend","title","subtitle","fill"],["cardTitle","D\xe9pense par mois"],[3,"series","chart","xaxis","stroke","dataLabels","yaxis","labels","legend","title","subtitle","plotOptions"]],template:function(a,n){1&a&&(t.TgZ(0,"p"),t._uU(1,"statistique works!"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"app-card",2)(5,"h6",3),t._uU(6,"Temps moyen de r\xe9paration"),t.qZA(),t.TgZ(7,"div",4)(8,"div",5)(9,"h3",6),t._UZ(10,"i",7),t._uU(11),t.qZA()(),t.TgZ(12,"div",8)(13,"p",9),t._uU(14,"100%"),t.qZA()()(),t.TgZ(15,"div",10),t._UZ(16,"ngb-progressbar",11),t.qZA()()(),t._UZ(17,"div",1),t.TgZ(18,"div",12),t.YNc(19,q,3,11,"app-card",13),t.qZA(),t.TgZ(20,"div",14),t.YNc(21,I,3,11,"app-card",15),t.qZA()()),2&a&&(t.xp6(4),t.Q6J("hidHeader",!0),t.xp6(7),t.hij("",n.tempMoyen," "),t.xp6(5),t.Q6J("value",100),t.xp6(3),t.Q6J("ngIf",void 0!==n.jourChartOptions),t.xp6(2),t.Q6J("ngIf",void 0!==n.montChart))},dependencies:[g.O5,T.A,y.Ly,Z.x]}),e})()}]}];let i=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(f),c.Bz]}),e})(),h=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,i]}),e})()},4631:(R,x,u)=>{u.d(x,{A:()=>I});var g=u(2953),c=u(7340),t=u(4650),b=u(6895);function M(l,f){if(1&l&&(t.TgZ(0,"h5"),t._uU(1),t.qZA()),2&l){const i=t.oxw(2);t.xp6(1),t.Oqu(i.cardTitle)}}function T(l,f){if(1&l){const i=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"button",10),t._UZ(3,"i",11),t.qZA(),t.TgZ(4,"ul",12)(5,"li",13),t.NdJ("click",function(){t.CHM(i);const e=t.oxw(2),m=t.MAs(1);return t.KtG(e.fullCardToggle(m,"",!0))}),t.TgZ(6,"a",14)(7,"span"),t._UZ(8,"i",15),t._uU(9),t.qZA()()(),t.TgZ(10,"li",16),t.NdJ("click",function(e){t.CHM(i);const m=t.oxw(2);return t.KtG(m.collapsedCardToggle(e))}),t.TgZ(11,"a",14)(12,"span"),t._UZ(13,"i",15),t._uU(14),t.qZA(),t.TgZ(15,"span",17),t._UZ(16,"i",18),t.qZA()()(),t.TgZ(17,"li",19),t.NdJ("click",function(){t.CHM(i);const e=t.oxw(2);return t.KtG(e.cardRefresh())}),t.TgZ(18,"a",14),t._UZ(19,"i",20),t._uU(20," Reload"),t.qZA()(),t.TgZ(21,"li",21),t.NdJ("click",function(){t.CHM(i);const e=t.oxw(2);return t.KtG(e.cardRemoveAction())}),t.TgZ(22,"a",14),t._UZ(23,"i",22),t._uU(24," Remove"),t.qZA()()()()()}if(2&l){const i=t.oxw(2);t.xp6(8),t.Q6J("ngClass",i.fullIcon),t.xp6(1),t.hij(" ","full-card"===i.cardClass?"Restore":"Maximize",""),t.xp6(4),t.Q6J("ngClass",i.collapsedIcon),t.xp6(1),t.hij(" ","collapsed"===i.collapsedCard?"Expand":"Collapse"," ")}}function y(l,f){1&l&&t.Hsn(0,1,["*ngIf","customHeader"])}function Z(l,f){if(1&l&&(t.TgZ(0,"div",5),t.YNc(1,M,2,1,"h5",6),t.YNc(2,T,25,4,"div",7),t.YNc(3,y,1,0,"ng-content",6),t.qZA()),2&l){const i=t.oxw();t.Q6J("ngClass",i.headerClass),t.xp6(1),t.Q6J("ngIf",!i.customHeader),t.xp6(1),t.Q6J("ngIf",i.options&&!i.customHeader),t.xp6(1),t.Q6J("ngIf",i.customHeader)}}function A(l,f){1&l&&(t.TgZ(0,"div",23),t._UZ(1,"i",24),t.qZA())}const J=["*",[["",8,"app-card-header"]]],q=["*",".app-card-header"];let I=(()=>{class l{constructor(i){i.placement="bottom-right",this.customHeader=!1,this.options=!0,this.hidHeader=!1,this.cardTitle="Card Title",this.fullIcon="icon-maximize",this.isAnimating=!1,this.collapsedCard="expanded",this.collapsedIcon="icon-minus",this.loadCard=!1,this.cardRemove="open"}ngOnInit(){(!this.options||this.hidHeader||this.customHeader)&&(this.collapsedCard="false")}fullCardToggle(i,h,e){h="full-card"===this.cardClass?"zoomOut":"zoomIn",this.fullIcon="full-card"===this.cardClass?"icon-maximize":"icon-minimize",this.cardClass="full-card"===this.cardClass?this.cardClass:"full-card",e&&(this.animation=h),this.isAnimating=!0,setTimeout(()=>{this.cardClass="zoomOut"===h?"":this.cardClass,"full-card"===this.cardClass?document.querySelector("body").style.overflow="hidden":document.querySelector("body").removeAttribute("style")},500)}collapsedCardToggle(i){this.collapsedCard="collapsed"===this.collapsedCard?"expanded":"collapsed",this.collapsedIcon="collapsed"===this.collapsedCard?"icon-plus":"icon-minus"}cardRefresh(){this.loadCard=!0,this.cardClass="card-load",setTimeout(()=>{this.loadCard=!1,this.cardClass="expanded"},3e3)}cardRemoveAction(){this.cardRemove="closed"===this.cardRemove?"open":"closed"}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(g.jL))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-card"]],inputs:{cardTitle:"cardTitle",cardClass:"cardClass",blockClass:"blockClass",headerClass:"headerClass",options:"options",hidHeader:"hidHeader",customHeader:"customHeader"},features:[t._Bn([g.jL])],ngContentSelectors:q,decls:7,vars:6,consts:[[1,"card",3,"ngClass"],["toAnimate",""],["class","card-header",3,"ngClass",4,"ngIf"],[1,"card-block",3,"ngClass"],["class","card-loader",4,"ngIf"],[1,"card-header",3,"ngClass"],[4,"ngIf"],["class","card-header-right",4,"ngIf"],[1,"card-header-right"],["ngbDropdown","",1,"btn-group","card-option","dropdown"],["type","button","ngbDropdownToggle","",1,"btn","dropdown-toggle","btn-icon"],[1,"feather","icon-more-horizontal"],["ngbDropdownMenu","",1,"list-unstyled","card-option","dropdown-menu","dropdown-menu-right"],[1,"dropdown-item","full-card",3,"click"],["href","javascript:"],[1,"feather",3,"ngClass"],[1,"dropdown-item","minimize-card",3,"click"],[2,"display","none"],[1,"feather","icon-plus"],[1,"dropdown-item","reload-card",3,"click"],[1,"feather","icon-refresh-cw"],[1,"dropdown-item","close-card",3,"click"],[1,"feather","icon-trash"],[1,"card-loader"],[1,"pct-loader1","anim-rotate"]],template:function(i,h){1&i&&(t.F$t(J),t.TgZ(0,"div",0,1),t.YNc(2,Z,4,4,"div",2),t.TgZ(3,"div")(4,"div",3),t.Hsn(5),t.qZA()(),t.YNc(6,A,2,0,"div",4),t.qZA()),2&i&&(t.Q6J("ngClass",h.cardClass)("@cardRemove",h.cardRemove),t.xp6(2),t.Q6J("ngIf",!h.hidHeader),t.xp6(1),t.Q6J("@collapsedCard",h.collapsedCard),t.xp6(1),t.Q6J("ngClass",h.blockClass),t.xp6(2),t.Q6J("ngIf",h.loadCard))},dependencies:[b.mk,b.O5,g.jt,g.iD,g.Vi],styles:[".card.full-card[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;z-index:99999;border-radius:0;width:100vw!important;height:100vh!important}"],data:{animation:[(0,c.X$)("collapsedCard",[(0,c.SB)("collapsed, void",(0,c.oB)({overflow:"hidden",height:"0px"})),(0,c.SB)("expanded",(0,c.oB)({overflow:"hidden",height:c.l3})),(0,c.eR)("collapsed <=> expanded",[(0,c.jt)("400ms ease-in-out")])]),(0,c.X$)("cardRemove",[(0,c.SB)("open",(0,c.oB)({opacity:1})),(0,c.SB)("closed",(0,c.oB)({opacity:0,display:"none"})),(0,c.eR)("open <=> closed",(0,c.jt)("400ms"))])]}}),l})()}}]);